{
  "title": "前端性能优化",
  "date": "2018-03-07T00:00:00.000Z",
  "tags": [
    "优化",
    "性能优化"
  ],
  "draft": false,
  "body": {
    "raw": "\n# 背景\n\n在开发好页面后，如何让页面更快更好地运行，是区分程序员技术水平和视野的重要指标。因此，面试时，面试官经常会问你一个问题：**如何进行性能优化？**\n\n如果你在这时感到头脑一片空白，或者像之前的我一样，靠死记硬背或者仅凭过去的经验回答一些诸如压缩代码、打包代码、雪碧图、CDN、事件代理等方法，这说明你对性能优化的整体掌握还不够深入，还处于“听说过某方法就加入”的阶段。这种方法很难进行系统化的优化。\n\n最近一周，通过大量的面试和资料查询，我积累了一些经验和思考。在这个招聘的黄金时间，希望能分享给大家，帮助大家更好地理解和掌握性能优化。\n\n---\n\n# 什么是性能优化\n\n从前端的角度来看，性能优化可以分为两个方向：\n1. **页面加载速度快**\n2. **页面使用流畅**\n\n因此，我们对性能优化的研究可以聚焦在两个方面：**页面加载时间** 和 **页面运行效率**。\n\n---\n\n# 从浏览器打开到页面渲染完成，花费了多少时间？\n\n这个问题在面试中经常被问到：**从浏览器打开到页面渲染完成，发生了什么事情？**\n\n主要的过程如下：\n- 浏览器解析\n- 查询缓存\n- DNS 查询\n- 建立连接\n- 服务器处理请求\n- 服务器发送响应\n- 客户端收到页面\n- 解析 HTML\n- 构建渲染树\n- 开始显示内容（白屏时间）\n- 首屏内容加载完成（首屏时间）\n- 用户可交互（DOMContentLoaded）\n- 页面加载完成（load）\n\n很显然，如果要优化加载时间，我们需要从上述每一个步骤进行思考和总结，而不是零散地东拼西凑。\n\n---\n\n# 页面加载时间监控\n\n有句话说得好：**If You Can’t Measure It, You Can’t Manage It**。\n在优化这些环节之前，我们需要知道如何监控每个环节所花费的时间。\n\n## 推荐工具：`PerformanceTiming`\n\n`PerformanceTiming` 可以获取许多与页面加载相关的数据，常用的数据有：\n- **DNS 解析时间**：`domainLookupEnd - domainLookupStart`\n- **TCP 建立连接时间**：`connectEnd - connectStart`\n- **白屏时间**：`responseStart - navigationStart`\n- **DOM 渲染完成时间**：`domContentLoadedEventEnd - navigationStart`\n- **页面 onload 时间**：`loadEventEnd - navigationStart`\n\n如果不使用该 API，也可以通过以下方法监控：\n- 以服务器渲染返回的时间或 SPA 路由跳转离开的时间为起点；\n- 以 `DOMContentLoaded`、`load` 等事件为结束点进行记录；\n- 或直接使用 Google Analytics 等工具。\n\n方法很多，这里不展开细讲。\n\n---\n\n# 服务器部分优化要点\n\n后端部分可以从以下几个方面进行优化：\n1. **缓存**：缓存优化这里不细说。\n2. **DNS 查询时间**：可以使用 `httpdns` 或 DNS 预加载、域名收敛等手段优化。\n3. **链接时间**：\n   - 使用长连接和连接复用，如 `keep-alive`、`long-polling`、`http-streaming`、`websocket` 或自定义协议；\n   - 最好直接使用 HTTP/2。\n   - 为了优化连接环节，前端需要结合资源使用 CDN、雪碧图、代码合并等手段。\n4. **服务器处理请求时间**：\n   - 移动端访问 PC 页面时，应在服务器端使用 `302` 跳转，而非前端跳转；\n   - 启用 `HSTS`，要求浏览器之后访问使用 HTTPS，减少 HTTP 到 HTTPS 的无谓跳转，同时防止 SSL 剥离攻击，提升安全性。\n5. **服务器发送响应时间**：\n   - 使用 `Transfer-Encoding=chunked` 以多次返回响应，具体可参考 `bigpipe`；\n   - 减小 cookie 的体积等。\n\n---\n\n# 前端部分优化要点\n\n前端部分的优化可以聚焦于以下时间点：\n1. **白屏时间**\n2. **首屏时间**\n3. **可交互时间**\n4. **加载完成时间**\n\n针对每个时间点的优化方法有很多，可以结合业务场景灵活使用。",
    "code": "var Component=(()=>{var g=Object.create;var d=Object.defineProperty;var p=Object.getOwnPropertyDescriptor;var m=Object.getOwnPropertyNames;var w=Object.getPrototypeOf,u=Object.prototype.hasOwnProperty;var x=(n,e)=>()=>(e||n((e={exports:{}}).exports,e),e.exports),v=(n,e)=>{for(var r in e)d(n,r,{get:e[r],enumerable:!0})},a=(n,e,r,c)=>{if(e&&typeof e==\"object\"||typeof e==\"function\")for(let i of m(e))!u.call(n,i)&&i!==r&&d(n,i,{get:()=>e[i],enumerable:!(c=p(e,i))||c.enumerable});return n};var f=(n,e,r)=>(r=n!=null?g(w(n)):{},a(e||!n||!n.__esModule?d(r,\"default\",{value:n,enumerable:!0}):r,n)),N=n=>a(d({},\"__esModule\",{value:!0}),n);var t=x((S,h)=>{h.exports=_jsx_runtime});var k={};v(k,{default:()=>s,frontmatter:()=>M});var l=f(t()),M={title:\"\\u524D\\u7AEF\\u6027\\u80FD\\u4F18\\u5316\",date:\"2018-03-07\",tags:[\"\\u4F18\\u5316\",\"\\u6027\\u80FD\\u4F18\\u5316\"],draft:!1};function o(n){let e={a:\"a\",code:\"code\",h1:\"h1\",h2:\"h2\",hr:\"hr\",li:\"li\",ol:\"ol\",p:\"p\",path:\"path\",span:\"span\",strong:\"strong\",svg:\"svg\",ul:\"ul\",...n.components};return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)(e.h1,{className:\"content-header\",id:\"\\u80CC\\u666F\",children:[(0,l.jsx)(e.a,{\"aria-hidden\":\"true\",href:\"#\\u80CC\\u666F\",tabIndex:\"-1\",children:(0,l.jsx)(l.Fragment,{children:(0,l.jsx)(e.span,{className:\"content-header-link\",children:(0,l.jsxs)(e.svg,{className:\"h-5 linkicon w-5\",fill:\"currentColor\",viewBox:\"0 0 20 20\",xmlns:\"http://www.w3.org/2000/svg\",children:[(0,l.jsx)(e.path,{d:\"M12.232 4.232a2.5 2.5 0 0 1 3.536 3.536l-1.225 1.224a.75.75 0 0 0 1.061 1.06l1.224-1.224a4 4 0 0 0-5.656-5.656l-3 3a4 4 0 0 0 .225 5.865.75.75 0 0 0 .977-1.138 2.5 2.5 0 0 1-.142-3.667l3-3Z\"}),(0,l.jsx)(e.path,{d:\"M11.603 7.963a.75.75 0 0 0-.977 1.138 2.5 2.5 0 0 1 .142 3.667l-3 3a2.5 2.5 0 0 1-3.536-3.536l1.225-1.224a.75.75 0 0 0-1.061-1.06l-1.224 1.224a4 4 0 1 0 5.656 5.656l3-3a4 4 0 0 0-.225-5.865Z\"})]})})})}),\"\\u80CC\\u666F\"]}),(0,l.jsxs)(e.p,{children:[\"\\u5728\\u5F00\\u53D1\\u597D\\u9875\\u9762\\u540E\\uFF0C\\u5982\\u4F55\\u8BA9\\u9875\\u9762\\u66F4\\u5FEB\\u66F4\\u597D\\u5730\\u8FD0\\u884C\\uFF0C\\u662F\\u533A\\u5206\\u7A0B\\u5E8F\\u5458\\u6280\\u672F\\u6C34\\u5E73\\u548C\\u89C6\\u91CE\\u7684\\u91CD\\u8981\\u6307\\u6807\\u3002\\u56E0\\u6B64\\uFF0C\\u9762\\u8BD5\\u65F6\\uFF0C\\u9762\\u8BD5\\u5B98\\u7ECF\\u5E38\\u4F1A\\u95EE\\u4F60\\u4E00\\u4E2A\\u95EE\\u9898\\uFF1A\",(0,l.jsx)(e.strong,{children:\"\\u5982\\u4F55\\u8FDB\\u884C\\u6027\\u80FD\\u4F18\\u5316\\uFF1F\"})]}),(0,l.jsx)(e.p,{children:\"\\u5982\\u679C\\u4F60\\u5728\\u8FD9\\u65F6\\u611F\\u5230\\u5934\\u8111\\u4E00\\u7247\\u7A7A\\u767D\\uFF0C\\u6216\\u8005\\u50CF\\u4E4B\\u524D\\u7684\\u6211\\u4E00\\u6837\\uFF0C\\u9760\\u6B7B\\u8BB0\\u786C\\u80CC\\u6216\\u8005\\u4EC5\\u51ED\\u8FC7\\u53BB\\u7684\\u7ECF\\u9A8C\\u56DE\\u7B54\\u4E00\\u4E9B\\u8BF8\\u5982\\u538B\\u7F29\\u4EE3\\u7801\\u3001\\u6253\\u5305\\u4EE3\\u7801\\u3001\\u96EA\\u78A7\\u56FE\\u3001CDN\\u3001\\u4E8B\\u4EF6\\u4EE3\\u7406\\u7B49\\u65B9\\u6CD5\\uFF0C\\u8FD9\\u8BF4\\u660E\\u4F60\\u5BF9\\u6027\\u80FD\\u4F18\\u5316\\u7684\\u6574\\u4F53\\u638C\\u63E1\\u8FD8\\u4E0D\\u591F\\u6DF1\\u5165\\uFF0C\\u8FD8\\u5904\\u4E8E\\u201C\\u542C\\u8BF4\\u8FC7\\u67D0\\u65B9\\u6CD5\\u5C31\\u52A0\\u5165\\u201D\\u7684\\u9636\\u6BB5\\u3002\\u8FD9\\u79CD\\u65B9\\u6CD5\\u5F88\\u96BE\\u8FDB\\u884C\\u7CFB\\u7EDF\\u5316\\u7684\\u4F18\\u5316\\u3002\"}),(0,l.jsx)(e.p,{children:\"\\u6700\\u8FD1\\u4E00\\u5468\\uFF0C\\u901A\\u8FC7\\u5927\\u91CF\\u7684\\u9762\\u8BD5\\u548C\\u8D44\\u6599\\u67E5\\u8BE2\\uFF0C\\u6211\\u79EF\\u7D2F\\u4E86\\u4E00\\u4E9B\\u7ECF\\u9A8C\\u548C\\u601D\\u8003\\u3002\\u5728\\u8FD9\\u4E2A\\u62DB\\u8058\\u7684\\u9EC4\\u91D1\\u65F6\\u95F4\\uFF0C\\u5E0C\\u671B\\u80FD\\u5206\\u4EAB\\u7ED9\\u5927\\u5BB6\\uFF0C\\u5E2E\\u52A9\\u5927\\u5BB6\\u66F4\\u597D\\u5730\\u7406\\u89E3\\u548C\\u638C\\u63E1\\u6027\\u80FD\\u4F18\\u5316\\u3002\"}),(0,l.jsx)(e.hr,{}),(0,l.jsxs)(e.h1,{className:\"content-header\",id:\"\\u4EC0\\u4E48\\u662F\\u6027\\u80FD\\u4F18\\u5316\",children:[(0,l.jsx)(e.a,{\"aria-hidden\":\"true\",href:\"#\\u4EC0\\u4E48\\u662F\\u6027\\u80FD\\u4F18\\u5316\",tabIndex:\"-1\",children:(0,l.jsx)(l.Fragment,{children:(0,l.jsx)(e.span,{className:\"content-header-link\",children:(0,l.jsxs)(e.svg,{className:\"h-5 linkicon w-5\",fill:\"currentColor\",viewBox:\"0 0 20 20\",xmlns:\"http://www.w3.org/2000/svg\",children:[(0,l.jsx)(e.path,{d:\"M12.232 4.232a2.5 2.5 0 0 1 3.536 3.536l-1.225 1.224a.75.75 0 0 0 1.061 1.06l1.224-1.224a4 4 0 0 0-5.656-5.656l-3 3a4 4 0 0 0 .225 5.865.75.75 0 0 0 .977-1.138 2.5 2.5 0 0 1-.142-3.667l3-3Z\"}),(0,l.jsx)(e.path,{d:\"M11.603 7.963a.75.75 0 0 0-.977 1.138 2.5 2.5 0 0 1 .142 3.667l-3 3a2.5 2.5 0 0 1-3.536-3.536l1.225-1.224a.75.75 0 0 0-1.061-1.06l-1.224 1.224a4 4 0 1 0 5.656 5.656l3-3a4 4 0 0 0-.225-5.865Z\"})]})})})}),\"\\u4EC0\\u4E48\\u662F\\u6027\\u80FD\\u4F18\\u5316\"]}),(0,l.jsx)(e.p,{children:\"\\u4ECE\\u524D\\u7AEF\\u7684\\u89D2\\u5EA6\\u6765\\u770B\\uFF0C\\u6027\\u80FD\\u4F18\\u5316\\u53EF\\u4EE5\\u5206\\u4E3A\\u4E24\\u4E2A\\u65B9\\u5411\\uFF1A\"}),(0,l.jsxs)(e.ol,{children:[(0,l.jsx)(e.li,{children:(0,l.jsx)(e.strong,{children:\"\\u9875\\u9762\\u52A0\\u8F7D\\u901F\\u5EA6\\u5FEB\"})}),(0,l.jsx)(e.li,{children:(0,l.jsx)(e.strong,{children:\"\\u9875\\u9762\\u4F7F\\u7528\\u6D41\\u7545\"})})]}),(0,l.jsxs)(e.p,{children:[\"\\u56E0\\u6B64\\uFF0C\\u6211\\u4EEC\\u5BF9\\u6027\\u80FD\\u4F18\\u5316\\u7684\\u7814\\u7A76\\u53EF\\u4EE5\\u805A\\u7126\\u5728\\u4E24\\u4E2A\\u65B9\\u9762\\uFF1A\",(0,l.jsx)(e.strong,{children:\"\\u9875\\u9762\\u52A0\\u8F7D\\u65F6\\u95F4\"}),\" \\u548C \",(0,l.jsx)(e.strong,{children:\"\\u9875\\u9762\\u8FD0\\u884C\\u6548\\u7387\"}),\"\\u3002\"]}),(0,l.jsx)(e.hr,{}),(0,l.jsxs)(e.h1,{className:\"content-header\",id:\"\\u4ECE\\u6D4F\\u89C8\\u5668\\u6253\\u5F00\\u5230\\u9875\\u9762\\u6E32\\u67D3\\u5B8C\\u6210\\u82B1\\u8D39\\u4E86\\u591A\\u5C11\\u65F6\\u95F4\",children:[(0,l.jsx)(e.a,{\"aria-hidden\":\"true\",href:\"#\\u4ECE\\u6D4F\\u89C8\\u5668\\u6253\\u5F00\\u5230\\u9875\\u9762\\u6E32\\u67D3\\u5B8C\\u6210\\u82B1\\u8D39\\u4E86\\u591A\\u5C11\\u65F6\\u95F4\",tabIndex:\"-1\",children:(0,l.jsx)(l.Fragment,{children:(0,l.jsx)(e.span,{className:\"content-header-link\",children:(0,l.jsxs)(e.svg,{className:\"h-5 linkicon w-5\",fill:\"currentColor\",viewBox:\"0 0 20 20\",xmlns:\"http://www.w3.org/2000/svg\",children:[(0,l.jsx)(e.path,{d:\"M12.232 4.232a2.5 2.5 0 0 1 3.536 3.536l-1.225 1.224a.75.75 0 0 0 1.061 1.06l1.224-1.224a4 4 0 0 0-5.656-5.656l-3 3a4 4 0 0 0 .225 5.865.75.75 0 0 0 .977-1.138 2.5 2.5 0 0 1-.142-3.667l3-3Z\"}),(0,l.jsx)(e.path,{d:\"M11.603 7.963a.75.75 0 0 0-.977 1.138 2.5 2.5 0 0 1 .142 3.667l-3 3a2.5 2.5 0 0 1-3.536-3.536l1.225-1.224a.75.75 0 0 0-1.061-1.06l-1.224 1.224a4 4 0 1 0 5.656 5.656l3-3a4 4 0 0 0-.225-5.865Z\"})]})})})}),\"\\u4ECE\\u6D4F\\u89C8\\u5668\\u6253\\u5F00\\u5230\\u9875\\u9762\\u6E32\\u67D3\\u5B8C\\u6210\\uFF0C\\u82B1\\u8D39\\u4E86\\u591A\\u5C11\\u65F6\\u95F4\\uFF1F\"]}),(0,l.jsxs)(e.p,{children:[\"\\u8FD9\\u4E2A\\u95EE\\u9898\\u5728\\u9762\\u8BD5\\u4E2D\\u7ECF\\u5E38\\u88AB\\u95EE\\u5230\\uFF1A\",(0,l.jsx)(e.strong,{children:\"\\u4ECE\\u6D4F\\u89C8\\u5668\\u6253\\u5F00\\u5230\\u9875\\u9762\\u6E32\\u67D3\\u5B8C\\u6210\\uFF0C\\u53D1\\u751F\\u4E86\\u4EC0\\u4E48\\u4E8B\\u60C5\\uFF1F\"})]}),(0,l.jsx)(e.p,{children:\"\\u4E3B\\u8981\\u7684\\u8FC7\\u7A0B\\u5982\\u4E0B\\uFF1A\"}),(0,l.jsxs)(e.ul,{children:[(0,l.jsx)(e.li,{children:\"\\u6D4F\\u89C8\\u5668\\u89E3\\u6790\"}),(0,l.jsx)(e.li,{children:\"\\u67E5\\u8BE2\\u7F13\\u5B58\"}),(0,l.jsx)(e.li,{children:\"DNS \\u67E5\\u8BE2\"}),(0,l.jsx)(e.li,{children:\"\\u5EFA\\u7ACB\\u8FDE\\u63A5\"}),(0,l.jsx)(e.li,{children:\"\\u670D\\u52A1\\u5668\\u5904\\u7406\\u8BF7\\u6C42\"}),(0,l.jsx)(e.li,{children:\"\\u670D\\u52A1\\u5668\\u53D1\\u9001\\u54CD\\u5E94\"}),(0,l.jsx)(e.li,{children:\"\\u5BA2\\u6237\\u7AEF\\u6536\\u5230\\u9875\\u9762\"}),(0,l.jsx)(e.li,{children:\"\\u89E3\\u6790 HTML\"}),(0,l.jsx)(e.li,{children:\"\\u6784\\u5EFA\\u6E32\\u67D3\\u6811\"}),(0,l.jsx)(e.li,{children:\"\\u5F00\\u59CB\\u663E\\u793A\\u5185\\u5BB9\\uFF08\\u767D\\u5C4F\\u65F6\\u95F4\\uFF09\"}),(0,l.jsx)(e.li,{children:\"\\u9996\\u5C4F\\u5185\\u5BB9\\u52A0\\u8F7D\\u5B8C\\u6210\\uFF08\\u9996\\u5C4F\\u65F6\\u95F4\\uFF09\"}),(0,l.jsx)(e.li,{children:\"\\u7528\\u6237\\u53EF\\u4EA4\\u4E92\\uFF08DOMContentLoaded\\uFF09\"}),(0,l.jsx)(e.li,{children:\"\\u9875\\u9762\\u52A0\\u8F7D\\u5B8C\\u6210\\uFF08load\\uFF09\"})]}),(0,l.jsx)(e.p,{children:\"\\u5F88\\u663E\\u7136\\uFF0C\\u5982\\u679C\\u8981\\u4F18\\u5316\\u52A0\\u8F7D\\u65F6\\u95F4\\uFF0C\\u6211\\u4EEC\\u9700\\u8981\\u4ECE\\u4E0A\\u8FF0\\u6BCF\\u4E00\\u4E2A\\u6B65\\u9AA4\\u8FDB\\u884C\\u601D\\u8003\\u548C\\u603B\\u7ED3\\uFF0C\\u800C\\u4E0D\\u662F\\u96F6\\u6563\\u5730\\u4E1C\\u62FC\\u897F\\u51D1\\u3002\"}),(0,l.jsx)(e.hr,{}),(0,l.jsxs)(e.h1,{className:\"content-header\",id:\"\\u9875\\u9762\\u52A0\\u8F7D\\u65F6\\u95F4\\u76D1\\u63A7\",children:[(0,l.jsx)(e.a,{\"aria-hidden\":\"true\",href:\"#\\u9875\\u9762\\u52A0\\u8F7D\\u65F6\\u95F4\\u76D1\\u63A7\",tabIndex:\"-1\",children:(0,l.jsx)(l.Fragment,{children:(0,l.jsx)(e.span,{className:\"content-header-link\",children:(0,l.jsxs)(e.svg,{className:\"h-5 linkicon w-5\",fill:\"currentColor\",viewBox:\"0 0 20 20\",xmlns:\"http://www.w3.org/2000/svg\",children:[(0,l.jsx)(e.path,{d:\"M12.232 4.232a2.5 2.5 0 0 1 3.536 3.536l-1.225 1.224a.75.75 0 0 0 1.061 1.06l1.224-1.224a4 4 0 0 0-5.656-5.656l-3 3a4 4 0 0 0 .225 5.865.75.75 0 0 0 .977-1.138 2.5 2.5 0 0 1-.142-3.667l3-3Z\"}),(0,l.jsx)(e.path,{d:\"M11.603 7.963a.75.75 0 0 0-.977 1.138 2.5 2.5 0 0 1 .142 3.667l-3 3a2.5 2.5 0 0 1-3.536-3.536l1.225-1.224a.75.75 0 0 0-1.061-1.06l-1.224 1.224a4 4 0 1 0 5.656 5.656l3-3a4 4 0 0 0-.225-5.865Z\"})]})})})}),\"\\u9875\\u9762\\u52A0\\u8F7D\\u65F6\\u95F4\\u76D1\\u63A7\"]}),(0,l.jsxs)(e.p,{children:[\"\\u6709\\u53E5\\u8BDD\\u8BF4\\u5F97\\u597D\\uFF1A\",(0,l.jsx)(e.strong,{children:\"If You Can\\u2019t Measure It, You Can\\u2019t Manage It\"}),\"\\u3002 \\u5728\\u4F18\\u5316\\u8FD9\\u4E9B\\u73AF\\u8282\\u4E4B\\u524D\\uFF0C\\u6211\\u4EEC\\u9700\\u8981\\u77E5\\u9053\\u5982\\u4F55\\u76D1\\u63A7\\u6BCF\\u4E2A\\u73AF\\u8282\\u6240\\u82B1\\u8D39\\u7684\\u65F6\\u95F4\\u3002\"]}),(0,l.jsxs)(e.h2,{className:\"content-header\",id:\"\\u63A8\\u8350\\u5DE5\\u5177performancetiming\",children:[(0,l.jsx)(e.a,{\"aria-hidden\":\"true\",href:\"#\\u63A8\\u8350\\u5DE5\\u5177performancetiming\",tabIndex:\"-1\",children:(0,l.jsx)(l.Fragment,{children:(0,l.jsx)(e.span,{className:\"content-header-link\",children:(0,l.jsxs)(e.svg,{className:\"h-5 linkicon w-5\",fill:\"currentColor\",viewBox:\"0 0 20 20\",xmlns:\"http://www.w3.org/2000/svg\",children:[(0,l.jsx)(e.path,{d:\"M12.232 4.232a2.5 2.5 0 0 1 3.536 3.536l-1.225 1.224a.75.75 0 0 0 1.061 1.06l1.224-1.224a4 4 0 0 0-5.656-5.656l-3 3a4 4 0 0 0 .225 5.865.75.75 0 0 0 .977-1.138 2.5 2.5 0 0 1-.142-3.667l3-3Z\"}),(0,l.jsx)(e.path,{d:\"M11.603 7.963a.75.75 0 0 0-.977 1.138 2.5 2.5 0 0 1 .142 3.667l-3 3a2.5 2.5 0 0 1-3.536-3.536l1.225-1.224a.75.75 0 0 0-1.061-1.06l-1.224 1.224a4 4 0 1 0 5.656 5.656l3-3a4 4 0 0 0-.225-5.865Z\"})]})})})}),\"\\u63A8\\u8350\\u5DE5\\u5177\\uFF1A\",(0,l.jsx)(e.code,{children:\"PerformanceTiming\"})]}),(0,l.jsxs)(e.p,{children:[(0,l.jsx)(e.code,{children:\"PerformanceTiming\"}),\" \\u53EF\\u4EE5\\u83B7\\u53D6\\u8BB8\\u591A\\u4E0E\\u9875\\u9762\\u52A0\\u8F7D\\u76F8\\u5173\\u7684\\u6570\\u636E\\uFF0C\\u5E38\\u7528\\u7684\\u6570\\u636E\\u6709\\uFF1A\"]}),(0,l.jsxs)(e.ul,{children:[(0,l.jsxs)(e.li,{children:[(0,l.jsx)(e.strong,{children:\"DNS \\u89E3\\u6790\\u65F6\\u95F4\"}),\"\\uFF1A\",(0,l.jsx)(e.code,{children:\"domainLookupEnd - domainLookupStart\"})]}),(0,l.jsxs)(e.li,{children:[(0,l.jsx)(e.strong,{children:\"TCP \\u5EFA\\u7ACB\\u8FDE\\u63A5\\u65F6\\u95F4\"}),\"\\uFF1A\",(0,l.jsx)(e.code,{children:\"connectEnd - connectStart\"})]}),(0,l.jsxs)(e.li,{children:[(0,l.jsx)(e.strong,{children:\"\\u767D\\u5C4F\\u65F6\\u95F4\"}),\"\\uFF1A\",(0,l.jsx)(e.code,{children:\"responseStart - navigationStart\"})]}),(0,l.jsxs)(e.li,{children:[(0,l.jsx)(e.strong,{children:\"DOM \\u6E32\\u67D3\\u5B8C\\u6210\\u65F6\\u95F4\"}),\"\\uFF1A\",(0,l.jsx)(e.code,{children:\"domContentLoadedEventEnd - navigationStart\"})]}),(0,l.jsxs)(e.li,{children:[(0,l.jsx)(e.strong,{children:\"\\u9875\\u9762 onload \\u65F6\\u95F4\"}),\"\\uFF1A\",(0,l.jsx)(e.code,{children:\"loadEventEnd - navigationStart\"})]})]}),(0,l.jsx)(e.p,{children:\"\\u5982\\u679C\\u4E0D\\u4F7F\\u7528\\u8BE5 API\\uFF0C\\u4E5F\\u53EF\\u4EE5\\u901A\\u8FC7\\u4EE5\\u4E0B\\u65B9\\u6CD5\\u76D1\\u63A7\\uFF1A\"}),(0,l.jsxs)(e.ul,{children:[(0,l.jsx)(e.li,{children:\"\\u4EE5\\u670D\\u52A1\\u5668\\u6E32\\u67D3\\u8FD4\\u56DE\\u7684\\u65F6\\u95F4\\u6216 SPA \\u8DEF\\u7531\\u8DF3\\u8F6C\\u79BB\\u5F00\\u7684\\u65F6\\u95F4\\u4E3A\\u8D77\\u70B9\\uFF1B\"}),(0,l.jsxs)(e.li,{children:[\"\\u4EE5 \",(0,l.jsx)(e.code,{children:\"DOMContentLoaded\"}),\"\\u3001\",(0,l.jsx)(e.code,{children:\"load\"}),\" \\u7B49\\u4E8B\\u4EF6\\u4E3A\\u7ED3\\u675F\\u70B9\\u8FDB\\u884C\\u8BB0\\u5F55\\uFF1B\"]}),(0,l.jsx)(e.li,{children:\"\\u6216\\u76F4\\u63A5\\u4F7F\\u7528 Google Analytics \\u7B49\\u5DE5\\u5177\\u3002\"})]}),(0,l.jsx)(e.p,{children:\"\\u65B9\\u6CD5\\u5F88\\u591A\\uFF0C\\u8FD9\\u91CC\\u4E0D\\u5C55\\u5F00\\u7EC6\\u8BB2\\u3002\"}),(0,l.jsx)(e.hr,{}),(0,l.jsxs)(e.h1,{className:\"content-header\",id:\"\\u670D\\u52A1\\u5668\\u90E8\\u5206\\u4F18\\u5316\\u8981\\u70B9\",children:[(0,l.jsx)(e.a,{\"aria-hidden\":\"true\",href:\"#\\u670D\\u52A1\\u5668\\u90E8\\u5206\\u4F18\\u5316\\u8981\\u70B9\",tabIndex:\"-1\",children:(0,l.jsx)(l.Fragment,{children:(0,l.jsx)(e.span,{className:\"content-header-link\",children:(0,l.jsxs)(e.svg,{className:\"h-5 linkicon w-5\",fill:\"currentColor\",viewBox:\"0 0 20 20\",xmlns:\"http://www.w3.org/2000/svg\",children:[(0,l.jsx)(e.path,{d:\"M12.232 4.232a2.5 2.5 0 0 1 3.536 3.536l-1.225 1.224a.75.75 0 0 0 1.061 1.06l1.224-1.224a4 4 0 0 0-5.656-5.656l-3 3a4 4 0 0 0 .225 5.865.75.75 0 0 0 .977-1.138 2.5 2.5 0 0 1-.142-3.667l3-3Z\"}),(0,l.jsx)(e.path,{d:\"M11.603 7.963a.75.75 0 0 0-.977 1.138 2.5 2.5 0 0 1 .142 3.667l-3 3a2.5 2.5 0 0 1-3.536-3.536l1.225-1.224a.75.75 0 0 0-1.061-1.06l-1.224 1.224a4 4 0 1 0 5.656 5.656l3-3a4 4 0 0 0-.225-5.865Z\"})]})})})}),\"\\u670D\\u52A1\\u5668\\u90E8\\u5206\\u4F18\\u5316\\u8981\\u70B9\"]}),(0,l.jsx)(e.p,{children:\"\\u540E\\u7AEF\\u90E8\\u5206\\u53EF\\u4EE5\\u4ECE\\u4EE5\\u4E0B\\u51E0\\u4E2A\\u65B9\\u9762\\u8FDB\\u884C\\u4F18\\u5316\\uFF1A\"}),(0,l.jsxs)(e.ol,{children:[(0,l.jsxs)(e.li,{children:[(0,l.jsx)(e.strong,{children:\"\\u7F13\\u5B58\"}),\"\\uFF1A\\u7F13\\u5B58\\u4F18\\u5316\\u8FD9\\u91CC\\u4E0D\\u7EC6\\u8BF4\\u3002\"]}),(0,l.jsxs)(e.li,{children:[(0,l.jsx)(e.strong,{children:\"DNS \\u67E5\\u8BE2\\u65F6\\u95F4\"}),\"\\uFF1A\\u53EF\\u4EE5\\u4F7F\\u7528 \",(0,l.jsx)(e.code,{children:\"httpdns\"}),\" \\u6216 DNS \\u9884\\u52A0\\u8F7D\\u3001\\u57DF\\u540D\\u6536\\u655B\\u7B49\\u624B\\u6BB5\\u4F18\\u5316\\u3002\"]}),(0,l.jsxs)(e.li,{children:[(0,l.jsx)(e.strong,{children:\"\\u94FE\\u63A5\\u65F6\\u95F4\"}),\"\\uFF1A\",(0,l.jsxs)(e.ul,{children:[(0,l.jsxs)(e.li,{children:[\"\\u4F7F\\u7528\\u957F\\u8FDE\\u63A5\\u548C\\u8FDE\\u63A5\\u590D\\u7528\\uFF0C\\u5982 \",(0,l.jsx)(e.code,{children:\"keep-alive\"}),\"\\u3001\",(0,l.jsx)(e.code,{children:\"long-polling\"}),\"\\u3001\",(0,l.jsx)(e.code,{children:\"http-streaming\"}),\"\\u3001\",(0,l.jsx)(e.code,{children:\"websocket\"}),\" \\u6216\\u81EA\\u5B9A\\u4E49\\u534F\\u8BAE\\uFF1B\"]}),(0,l.jsx)(e.li,{children:\"\\u6700\\u597D\\u76F4\\u63A5\\u4F7F\\u7528 HTTP/2\\u3002\"}),(0,l.jsx)(e.li,{children:\"\\u4E3A\\u4E86\\u4F18\\u5316\\u8FDE\\u63A5\\u73AF\\u8282\\uFF0C\\u524D\\u7AEF\\u9700\\u8981\\u7ED3\\u5408\\u8D44\\u6E90\\u4F7F\\u7528 CDN\\u3001\\u96EA\\u78A7\\u56FE\\u3001\\u4EE3\\u7801\\u5408\\u5E76\\u7B49\\u624B\\u6BB5\\u3002\"})]})]}),(0,l.jsxs)(e.li,{children:[(0,l.jsx)(e.strong,{children:\"\\u670D\\u52A1\\u5668\\u5904\\u7406\\u8BF7\\u6C42\\u65F6\\u95F4\"}),\"\\uFF1A\",(0,l.jsxs)(e.ul,{children:[(0,l.jsxs)(e.li,{children:[\"\\u79FB\\u52A8\\u7AEF\\u8BBF\\u95EE PC \\u9875\\u9762\\u65F6\\uFF0C\\u5E94\\u5728\\u670D\\u52A1\\u5668\\u7AEF\\u4F7F\\u7528 \",(0,l.jsx)(e.code,{children:\"302\"}),\" \\u8DF3\\u8F6C\\uFF0C\\u800C\\u975E\\u524D\\u7AEF\\u8DF3\\u8F6C\\uFF1B\"]}),(0,l.jsxs)(e.li,{children:[\"\\u542F\\u7528 \",(0,l.jsx)(e.code,{children:\"HSTS\"}),\"\\uFF0C\\u8981\\u6C42\\u6D4F\\u89C8\\u5668\\u4E4B\\u540E\\u8BBF\\u95EE\\u4F7F\\u7528 HTTPS\\uFF0C\\u51CF\\u5C11 HTTP \\u5230 HTTPS \\u7684\\u65E0\\u8C13\\u8DF3\\u8F6C\\uFF0C\\u540C\\u65F6\\u9632\\u6B62 SSL \\u5265\\u79BB\\u653B\\u51FB\\uFF0C\\u63D0\\u5347\\u5B89\\u5168\\u6027\\u3002\"]})]})]}),(0,l.jsxs)(e.li,{children:[(0,l.jsx)(e.strong,{children:\"\\u670D\\u52A1\\u5668\\u53D1\\u9001\\u54CD\\u5E94\\u65F6\\u95F4\"}),\"\\uFF1A\",(0,l.jsxs)(e.ul,{children:[(0,l.jsxs)(e.li,{children:[\"\\u4F7F\\u7528 \",(0,l.jsx)(e.code,{children:\"Transfer-Encoding=chunked\"}),\" \\u4EE5\\u591A\\u6B21\\u8FD4\\u56DE\\u54CD\\u5E94\\uFF0C\\u5177\\u4F53\\u53EF\\u53C2\\u8003 \",(0,l.jsx)(e.code,{children:\"bigpipe\"}),\"\\uFF1B\"]}),(0,l.jsx)(e.li,{children:\"\\u51CF\\u5C0F cookie \\u7684\\u4F53\\u79EF\\u7B49\\u3002\"})]})]})]}),(0,l.jsx)(e.hr,{}),(0,l.jsxs)(e.h1,{className:\"content-header\",id:\"\\u524D\\u7AEF\\u90E8\\u5206\\u4F18\\u5316\\u8981\\u70B9\",children:[(0,l.jsx)(e.a,{\"aria-hidden\":\"true\",href:\"#\\u524D\\u7AEF\\u90E8\\u5206\\u4F18\\u5316\\u8981\\u70B9\",tabIndex:\"-1\",children:(0,l.jsx)(l.Fragment,{children:(0,l.jsx)(e.span,{className:\"content-header-link\",children:(0,l.jsxs)(e.svg,{className:\"h-5 linkicon w-5\",fill:\"currentColor\",viewBox:\"0 0 20 20\",xmlns:\"http://www.w3.org/2000/svg\",children:[(0,l.jsx)(e.path,{d:\"M12.232 4.232a2.5 2.5 0 0 1 3.536 3.536l-1.225 1.224a.75.75 0 0 0 1.061 1.06l1.224-1.224a4 4 0 0 0-5.656-5.656l-3 3a4 4 0 0 0 .225 5.865.75.75 0 0 0 .977-1.138 2.5 2.5 0 0 1-.142-3.667l3-3Z\"}),(0,l.jsx)(e.path,{d:\"M11.603 7.963a.75.75 0 0 0-.977 1.138 2.5 2.5 0 0 1 .142 3.667l-3 3a2.5 2.5 0 0 1-3.536-3.536l1.225-1.224a.75.75 0 0 0-1.061-1.06l-1.224 1.224a4 4 0 1 0 5.656 5.656l3-3a4 4 0 0 0-.225-5.865Z\"})]})})})}),\"\\u524D\\u7AEF\\u90E8\\u5206\\u4F18\\u5316\\u8981\\u70B9\"]}),(0,l.jsx)(e.p,{children:\"\\u524D\\u7AEF\\u90E8\\u5206\\u7684\\u4F18\\u5316\\u53EF\\u4EE5\\u805A\\u7126\\u4E8E\\u4EE5\\u4E0B\\u65F6\\u95F4\\u70B9\\uFF1A\"}),(0,l.jsxs)(e.ol,{children:[(0,l.jsx)(e.li,{children:(0,l.jsx)(e.strong,{children:\"\\u767D\\u5C4F\\u65F6\\u95F4\"})}),(0,l.jsx)(e.li,{children:(0,l.jsx)(e.strong,{children:\"\\u9996\\u5C4F\\u65F6\\u95F4\"})}),(0,l.jsx)(e.li,{children:(0,l.jsx)(e.strong,{children:\"\\u53EF\\u4EA4\\u4E92\\u65F6\\u95F4\"})}),(0,l.jsx)(e.li,{children:(0,l.jsx)(e.strong,{children:\"\\u52A0\\u8F7D\\u5B8C\\u6210\\u65F6\\u95F4\"})})]}),(0,l.jsx)(e.p,{children:\"\\u9488\\u5BF9\\u6BCF\\u4E2A\\u65F6\\u95F4\\u70B9\\u7684\\u4F18\\u5316\\u65B9\\u6CD5\\u6709\\u5F88\\u591A\\uFF0C\\u53EF\\u4EE5\\u7ED3\\u5408\\u4E1A\\u52A1\\u573A\\u666F\\u7075\\u6D3B\\u4F7F\\u7528\\u3002\"})]})}function s(n={}){let{wrapper:e}=n.components||{};return e?(0,l.jsx)(e,{...n,children:(0,l.jsx)(o,{...n})}):o(n)}return N(k);})();\n;return Component;"
  },
  "_id": "blog/fe-performance.mdx",
  "_raw": {
    "sourceFilePath": "blog/fe-performance.mdx",
    "sourceFileName": "fe-performance.mdx",
    "sourceFileDir": "blog",
    "contentType": "mdx",
    "flattenedPath": "blog/fe-performance"
  },
  "type": "Blog",
  "readingTime": {
    "text": "6 min read",
    "minutes": 5.1,
    "time": 306000,
    "words": 1020
  },
  "slug": "fe-performance",
  "path": "blog/fe-performance",
  "filePath": "blog/fe-performance.mdx",
  "toc": [
    {
      "value": "背景",
      "url": "#背景",
      "depth": 1
    },
    {
      "value": "什么是性能优化",
      "url": "#什么是性能优化",
      "depth": 1
    },
    {
      "value": "从浏览器打开到页面渲染完成，花费了多少时间？",
      "url": "#从浏览器打开到页面渲染完成花费了多少时间",
      "depth": 1
    },
    {
      "value": "页面加载时间监控",
      "url": "#页面加载时间监控",
      "depth": 1
    },
    {
      "value": "推荐工具：PerformanceTiming",
      "url": "#推荐工具performancetiming",
      "depth": 2
    },
    {
      "value": "服务器部分优化要点",
      "url": "#服务器部分优化要点",
      "depth": 1
    },
    {
      "value": "前端部分优化要点",
      "url": "#前端部分优化要点",
      "depth": 1
    }
  ],
  "structuredData": {
    "@context": "https://schema.org",
    "@type": "BlogPosting",
    "headline": "前端性能优化",
    "datePublished": "2018-03-07T00:00:00.000Z",
    "dateModified": "2018-03-07T00:00:00.000Z",
    "image": "/static/images/twitter-card.png",
    "url": "https://hpoenixf.com//blog/fe-performance"
  }
}