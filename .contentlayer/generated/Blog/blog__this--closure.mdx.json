{
  "title": "一次搞定闭包和this",
  "date": "2018-03-19T00:00:00.000Z",
  "tags": [],
  "draft": false,
  "body": {
    "raw": "\n\n# 执行上下文的过程\n\n## 全局上下文的创建\n\n1. **求 `this`：**\n   在浏览器中，`this` 指向 `window`。\n\n2. **创建全局的词法环境：**\n   负责存储 `let`、`const` 声明的变量和函数。\n\n3. **创建全局变量环境：**\n   负责存储 `var` 声明的变量。\n\n4. **函数被调用时：**\n   - 创建函数的执行上下文，并压入执行栈。\n   - **求 `this`：** 指向调用该函数的对象。\n   - 创建词法环境：记录变量、函数、参数等。\n   - 创建外部环境引用：链接到全局变量或父级函数的词法环境。\n   - 创建变量环境：存储 `var` 声明的变量。\n\n5. **函数执行后：**\n   - 运行代码，分配变量。\n   - 函数执行结束时销毁上下文，并从执行栈中弹出。\n\n---\n\n# 执行上下文\n\n## 什么是执行上下文？\n\n执行上下文是 JS 代码执行的环境。当 JS 执行一段代码时，会创建相应的执行上下文。执行上下文的结构如下：\n\n```javascript\nexecutionContextObj = {\n    this: 当前上下文的 this 指向,\n    VO: 变量对象,\n    scopeChain: 作用域链 (与闭包相关)\n}\n```\n\n执行上下文的特点\n\t1.\t单线程：一次只能处理一件事，其他代码排队等待。\n\t2.\t同步执行：代码按顺序执行。\n\t3.\t一个全局上下文：始终存在。\n\t4.\t无限制的函数上下文：每次函数调用都会创建新的上下文。\n\t5.\t每次函数调用都会创建新的上下文（包括递归调用）。\n\n执行上下文的创建步骤\n\n创建阶段\n\t1.\t初始化作用域链\n创建当前上下文的作用域链，链接到父级作用域。\n\t2.\t创建变量对象 (VO)\n\t•\t初始化 arguments 对象（如果是函数上下文）。\n\t•\t扫描函数声明，并将其提升。\n\t•\t扫描变量声明，将变量名添加到 VO，值设为 undefined。\n\t3.\t求 this\n根据调用方式确定 this 的指向。\n\n执行阶段\n\t1.\t初始化变量和函数的引用\n将变量赋值，执行函数代码。\n\t2.\t执行代码\n修改变量对象的值，完成代码逻辑。\n\nthis 的指向\n\n判断 this 的指向\n\t1.\t指向调用对象\n\n\t```javascript\nfunction foo() {\n    console.log(this.a);\n}\nvar obj = {\n    a: 2,\n    foo: foo\n};\nobj.foo(); // 输出 2\n\n\t```\n\t\t2.\t指向全局对象\n```javascript\n\tfunction foo() {\n        console.log(this.a);\n    }\n    var a = 2;\n    foo(); // 输出 2\n    ```\n\n    \t3.\t使用 new 构造时\n\n    \t```javascript\n    \tfunction A() {\n            this.a = 3;\n        }\n        var obj = new A();\n        console.log(obj.a); // 输出 3\n    \t```\n\t4.\tcall/apply/bind 改变 this 指向\n    ```javascript\n    var obj = { a: 2 };\n    function foo() {\n        console.log(this.a);\n    }\n    foo.call(obj); // 输出 2\n    ```\n\n    5.\t箭头函数\n        箭头函数没有自己的 this，其 this 指向定义时所在上下文的 this。\n    ```javascript\n    var obj = {\n        a: 2,\n        foo: () => {\n            console.log(this.a);\n        }\n    };\n    obj.foo(); // 输出 undefined（因为箭头函数的 this 指向全局）\n    ```\n\n\n    \t作用域与作用域链\n\n        作用域\n\n        作用域控制变量和函数的可见性与生命周期，分为：\n        \t1.\t全局作用域：在代码任何地方都能访问。\n        \t•\t最外层定义的变量。\n        \t•\t全局对象的属性。\n        \t•\t隐式定义的变量（未通过 var 声明直接赋值的变量）。\n        \t2.\t局部作用域：函数内定义的变量，仅在函数内可见。\n\n        作用域链\n\n        作用域链是用于查找标识符的链式结构，函数定义时会将父级作用域的变量对象保存到其内部属性 [[scope]] 中。\n\n        例子：静态作用域\n\n        ```javascript\n        var s = 3;\n        function a() {\n            console.log(s);\n        }\n        function b() {\n            var s = 6;\n            a();\n        }\n        b(); // 输出 3（静态作用域：在定义时确定作用域）\n        ```\n闭包\n\n什么是闭包？\n\n闭包是可以访问自由变量的函数。自由变量是指未在函数内部声明的变量。\n\n闭包的例子\n\n```javascript\nfunction a() {\n    var num = 1;\n    function b() {\n        console.log(num++);\n    }\n    return b;\n}\nvar c1 = a();\nc1(); // 输出 1\nc1(); // 输出 2\nvar c2 = a();\nc2(); // 输出 1\nc2(); // 输出 2\n\n```\n\n闭包的过程\n\t1.\t执行函数 a 时，创建其变量对象，包含变量 num 和函数 b。\n\t2.\t函数 b 定义时，保存 a 的变量对象到其 [[scope]] 中。\n\t3.\t当 c1 调用 b 时，通过作用域链访问 a 的变量对象并修改 num 的值。\n\n\t总结：执行上下文过程\n\n    以代码为例：\n\n    ```javascript\n    var scope = \"global scope\";\n    function checkscope(a) {\n        var scope2 = \"local scope\";\n    }\n    checkscope(5);\n    ```\n\n    \t1.\t创建全局上下文\n    创建全局变量对象 globalContext.VO。\n    \t2.\t创建 checkscope 函数\n    保存全局变量对象到 checkscope 的 [[scope]] 属性。\n    \t3.\t调用 checkscope 函数\n    \t•\t创建 checkscope 的执行上下文。\n    \t•\t复制 [[scope]] 创建作用域链。\n    \t•\t创建活动对象 AO，包含参数、变量和函数声明。\n    \t•\t求 this 指向全局对象。\n    \t4.\t执行函数代码\n    \t•\t更新活动对象 AO 的值。\n    \t•\t执行完毕后，从执行上下文栈中弹出。",
    "code": "var Component=(()=>{var h=Object.create;var l=Object.defineProperty;var m=Object.getOwnPropertyDescriptor;var u=Object.getOwnPropertyNames;var N=Object.getPrototypeOf,k=Object.prototype.hasOwnProperty;var g=(a,n)=>()=>(n||a((n={exports:{}}).exports,n),n.exports),f=(a,n)=>{for(var c in n)l(a,c,{get:n[c],enumerable:!0})},t=(a,n,c,i)=>{if(n&&typeof n==\"object\"||typeof n==\"function\")for(let s of u(n))!k.call(a,s)&&s!==c&&l(a,s,{get:()=>n[s],enumerable:!(i=m(n,s))||i.enumerable});return a};var w=(a,n,c)=>(c=a!=null?h(N(a)):{},t(n||!a||!a.__esModule?l(c,\"default\",{value:a,enumerable:!0}):c,a)),y=a=>t(l({},\"__esModule\",{value:!0}),a);var r=g((x,o)=>{o.exports=_jsx_runtime});var b={};f(b,{default:()=>d,frontmatter:()=>v});var e=w(r()),v={title:\"\\u4E00\\u6B21\\u641E\\u5B9A\\u95ED\\u5305\\u548Cthis\",date:\"2018-03-19\",draft:!1};function p(a){let n={a:\"a\",code:\"code\",h1:\"h1\",h2:\"h2\",hr:\"hr\",li:\"li\",ol:\"ol\",p:\"p\",path:\"path\",pre:\"pre\",span:\"span\",strong:\"strong\",svg:\"svg\",ul:\"ul\",...a.components};return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsxs)(n.h1,{className:\"content-header\",id:\"\\u6267\\u884C\\u4E0A\\u4E0B\\u6587\\u7684\\u8FC7\\u7A0B\",children:[(0,e.jsx)(n.a,{\"aria-hidden\":\"true\",href:\"#\\u6267\\u884C\\u4E0A\\u4E0B\\u6587\\u7684\\u8FC7\\u7A0B\",tabIndex:\"-1\",children:(0,e.jsx)(e.Fragment,{children:(0,e.jsx)(n.span,{className:\"content-header-link\",children:(0,e.jsxs)(n.svg,{className:\"h-5 linkicon w-5\",fill:\"currentColor\",viewBox:\"0 0 20 20\",xmlns:\"http://www.w3.org/2000/svg\",children:[(0,e.jsx)(n.path,{d:\"M12.232 4.232a2.5 2.5 0 0 1 3.536 3.536l-1.225 1.224a.75.75 0 0 0 1.061 1.06l1.224-1.224a4 4 0 0 0-5.656-5.656l-3 3a4 4 0 0 0 .225 5.865.75.75 0 0 0 .977-1.138 2.5 2.5 0 0 1-.142-3.667l3-3Z\"}),(0,e.jsx)(n.path,{d:\"M11.603 7.963a.75.75 0 0 0-.977 1.138 2.5 2.5 0 0 1 .142 3.667l-3 3a2.5 2.5 0 0 1-3.536-3.536l1.225-1.224a.75.75 0 0 0-1.061-1.06l-1.224 1.224a4 4 0 1 0 5.656 5.656l3-3a4 4 0 0 0-.225-5.865Z\"})]})})})}),\"\\u6267\\u884C\\u4E0A\\u4E0B\\u6587\\u7684\\u8FC7\\u7A0B\"]}),(0,e.jsxs)(n.h2,{className:\"content-header\",id:\"\\u5168\\u5C40\\u4E0A\\u4E0B\\u6587\\u7684\\u521B\\u5EFA\",children:[(0,e.jsx)(n.a,{\"aria-hidden\":\"true\",href:\"#\\u5168\\u5C40\\u4E0A\\u4E0B\\u6587\\u7684\\u521B\\u5EFA\",tabIndex:\"-1\",children:(0,e.jsx)(e.Fragment,{children:(0,e.jsx)(n.span,{className:\"content-header-link\",children:(0,e.jsxs)(n.svg,{className:\"h-5 linkicon w-5\",fill:\"currentColor\",viewBox:\"0 0 20 20\",xmlns:\"http://www.w3.org/2000/svg\",children:[(0,e.jsx)(n.path,{d:\"M12.232 4.232a2.5 2.5 0 0 1 3.536 3.536l-1.225 1.224a.75.75 0 0 0 1.061 1.06l1.224-1.224a4 4 0 0 0-5.656-5.656l-3 3a4 4 0 0 0 .225 5.865.75.75 0 0 0 .977-1.138 2.5 2.5 0 0 1-.142-3.667l3-3Z\"}),(0,e.jsx)(n.path,{d:\"M11.603 7.963a.75.75 0 0 0-.977 1.138 2.5 2.5 0 0 1 .142 3.667l-3 3a2.5 2.5 0 0 1-3.536-3.536l1.225-1.224a.75.75 0 0 0-1.061-1.06l-1.224 1.224a4 4 0 1 0 5.656 5.656l3-3a4 4 0 0 0-.225-5.865Z\"})]})})})}),\"\\u5168\\u5C40\\u4E0A\\u4E0B\\u6587\\u7684\\u521B\\u5EFA\"]}),(0,e.jsxs)(n.ol,{children:[(0,e.jsx)(n.li,{children:(0,e.jsxs)(n.p,{children:[(0,e.jsxs)(n.strong,{children:[\"\\u6C42 \",(0,e.jsx)(n.code,{children:\"this\"}),\"\\uFF1A\"]}),\" \\u5728\\u6D4F\\u89C8\\u5668\\u4E2D\\uFF0C\",(0,e.jsx)(n.code,{children:\"this\"}),\" \\u6307\\u5411 \",(0,e.jsx)(n.code,{children:\"window\"}),\"\\u3002\"]})}),(0,e.jsx)(n.li,{children:(0,e.jsxs)(n.p,{children:[(0,e.jsx)(n.strong,{children:\"\\u521B\\u5EFA\\u5168\\u5C40\\u7684\\u8BCD\\u6CD5\\u73AF\\u5883\\uFF1A\"}),\" \\u8D1F\\u8D23\\u5B58\\u50A8 \",(0,e.jsx)(n.code,{children:\"let\"}),\"\\u3001\",(0,e.jsx)(n.code,{children:\"const\"}),\" \\u58F0\\u660E\\u7684\\u53D8\\u91CF\\u548C\\u51FD\\u6570\\u3002\"]})}),(0,e.jsx)(n.li,{children:(0,e.jsxs)(n.p,{children:[(0,e.jsx)(n.strong,{children:\"\\u521B\\u5EFA\\u5168\\u5C40\\u53D8\\u91CF\\u73AF\\u5883\\uFF1A\"}),\" \\u8D1F\\u8D23\\u5B58\\u50A8 \",(0,e.jsx)(n.code,{children:\"var\"}),\" \\u58F0\\u660E\\u7684\\u53D8\\u91CF\\u3002\"]})}),(0,e.jsxs)(n.li,{children:[(0,e.jsx)(n.p,{children:(0,e.jsx)(n.strong,{children:\"\\u51FD\\u6570\\u88AB\\u8C03\\u7528\\u65F6\\uFF1A\"})}),(0,e.jsxs)(n.ul,{children:[(0,e.jsx)(n.li,{children:\"\\u521B\\u5EFA\\u51FD\\u6570\\u7684\\u6267\\u884C\\u4E0A\\u4E0B\\u6587\\uFF0C\\u5E76\\u538B\\u5165\\u6267\\u884C\\u6808\\u3002\"}),(0,e.jsxs)(n.li,{children:[(0,e.jsxs)(n.strong,{children:[\"\\u6C42 \",(0,e.jsx)(n.code,{children:\"this\"}),\"\\uFF1A\"]}),\" \\u6307\\u5411\\u8C03\\u7528\\u8BE5\\u51FD\\u6570\\u7684\\u5BF9\\u8C61\\u3002\"]}),(0,e.jsx)(n.li,{children:\"\\u521B\\u5EFA\\u8BCD\\u6CD5\\u73AF\\u5883\\uFF1A\\u8BB0\\u5F55\\u53D8\\u91CF\\u3001\\u51FD\\u6570\\u3001\\u53C2\\u6570\\u7B49\\u3002\"}),(0,e.jsx)(n.li,{children:\"\\u521B\\u5EFA\\u5916\\u90E8\\u73AF\\u5883\\u5F15\\u7528\\uFF1A\\u94FE\\u63A5\\u5230\\u5168\\u5C40\\u53D8\\u91CF\\u6216\\u7236\\u7EA7\\u51FD\\u6570\\u7684\\u8BCD\\u6CD5\\u73AF\\u5883\\u3002\"}),(0,e.jsxs)(n.li,{children:[\"\\u521B\\u5EFA\\u53D8\\u91CF\\u73AF\\u5883\\uFF1A\\u5B58\\u50A8 \",(0,e.jsx)(n.code,{children:\"var\"}),\" \\u58F0\\u660E\\u7684\\u53D8\\u91CF\\u3002\"]})]})]}),(0,e.jsxs)(n.li,{children:[(0,e.jsx)(n.p,{children:(0,e.jsx)(n.strong,{children:\"\\u51FD\\u6570\\u6267\\u884C\\u540E\\uFF1A\"})}),(0,e.jsxs)(n.ul,{children:[(0,e.jsx)(n.li,{children:\"\\u8FD0\\u884C\\u4EE3\\u7801\\uFF0C\\u5206\\u914D\\u53D8\\u91CF\\u3002\"}),(0,e.jsx)(n.li,{children:\"\\u51FD\\u6570\\u6267\\u884C\\u7ED3\\u675F\\u65F6\\u9500\\u6BC1\\u4E0A\\u4E0B\\u6587\\uFF0C\\u5E76\\u4ECE\\u6267\\u884C\\u6808\\u4E2D\\u5F39\\u51FA\\u3002\"})]})]})]}),(0,e.jsx)(n.hr,{}),(0,e.jsxs)(n.h1,{className:\"content-header\",id:\"\\u6267\\u884C\\u4E0A\\u4E0B\\u6587\",children:[(0,e.jsx)(n.a,{\"aria-hidden\":\"true\",href:\"#\\u6267\\u884C\\u4E0A\\u4E0B\\u6587\",tabIndex:\"-1\",children:(0,e.jsx)(e.Fragment,{children:(0,e.jsx)(n.span,{className:\"content-header-link\",children:(0,e.jsxs)(n.svg,{className:\"h-5 linkicon w-5\",fill:\"currentColor\",viewBox:\"0 0 20 20\",xmlns:\"http://www.w3.org/2000/svg\",children:[(0,e.jsx)(n.path,{d:\"M12.232 4.232a2.5 2.5 0 0 1 3.536 3.536l-1.225 1.224a.75.75 0 0 0 1.061 1.06l1.224-1.224a4 4 0 0 0-5.656-5.656l-3 3a4 4 0 0 0 .225 5.865.75.75 0 0 0 .977-1.138 2.5 2.5 0 0 1-.142-3.667l3-3Z\"}),(0,e.jsx)(n.path,{d:\"M11.603 7.963a.75.75 0 0 0-.977 1.138 2.5 2.5 0 0 1 .142 3.667l-3 3a2.5 2.5 0 0 1-3.536-3.536l1.225-1.224a.75.75 0 0 0-1.061-1.06l-1.224 1.224a4 4 0 1 0 5.656 5.656l3-3a4 4 0 0 0-.225-5.865Z\"})]})})})}),\"\\u6267\\u884C\\u4E0A\\u4E0B\\u6587\"]}),(0,e.jsxs)(n.h2,{className:\"content-header\",id:\"\\u4EC0\\u4E48\\u662F\\u6267\\u884C\\u4E0A\\u4E0B\\u6587\",children:[(0,e.jsx)(n.a,{\"aria-hidden\":\"true\",href:\"#\\u4EC0\\u4E48\\u662F\\u6267\\u884C\\u4E0A\\u4E0B\\u6587\",tabIndex:\"-1\",children:(0,e.jsx)(e.Fragment,{children:(0,e.jsx)(n.span,{className:\"content-header-link\",children:(0,e.jsxs)(n.svg,{className:\"h-5 linkicon w-5\",fill:\"currentColor\",viewBox:\"0 0 20 20\",xmlns:\"http://www.w3.org/2000/svg\",children:[(0,e.jsx)(n.path,{d:\"M12.232 4.232a2.5 2.5 0 0 1 3.536 3.536l-1.225 1.224a.75.75 0 0 0 1.061 1.06l1.224-1.224a4 4 0 0 0-5.656-5.656l-3 3a4 4 0 0 0 .225 5.865.75.75 0 0 0 .977-1.138 2.5 2.5 0 0 1-.142-3.667l3-3Z\"}),(0,e.jsx)(n.path,{d:\"M11.603 7.963a.75.75 0 0 0-.977 1.138 2.5 2.5 0 0 1 .142 3.667l-3 3a2.5 2.5 0 0 1-3.536-3.536l1.225-1.224a.75.75 0 0 0-1.061-1.06l-1.224 1.224a4 4 0 1 0 5.656 5.656l3-3a4 4 0 0 0-.225-5.865Z\"})]})})})}),\"\\u4EC0\\u4E48\\u662F\\u6267\\u884C\\u4E0A\\u4E0B\\u6587\\uFF1F\"]}),(0,e.jsx)(n.p,{children:\"\\u6267\\u884C\\u4E0A\\u4E0B\\u6587\\u662F JS \\u4EE3\\u7801\\u6267\\u884C\\u7684\\u73AF\\u5883\\u3002\\u5F53 JS \\u6267\\u884C\\u4E00\\u6BB5\\u4EE3\\u7801\\u65F6\\uFF0C\\u4F1A\\u521B\\u5EFA\\u76F8\\u5E94\\u7684\\u6267\\u884C\\u4E0A\\u4E0B\\u6587\\u3002\\u6267\\u884C\\u4E0A\\u4E0B\\u6587\\u7684\\u7ED3\\u6784\\u5982\\u4E0B\\uFF1A\"}),(0,e.jsx)(n.pre,{className:\"language-javascript\",children:(0,e.jsxs)(n.code,{className:\"language-javascript code-highlight\",children:[(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"executionContextObj \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"=\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"this\"}),(0,e.jsx)(n.span,{className:\"token operator\",children:\":\"}),\" \\u5F53\\u524D\\u4E0A\\u4E0B\\u6587\\u7684 \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"this\"}),\" \\u6307\\u5411\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token constant\",children:\"VO\"}),(0,e.jsx)(n.span,{className:\"token operator\",children:\":\"}),\" \\u53D8\\u91CF\\u5BF9\\u8C61\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token literal-property property\",children:\"scopeChain\"}),(0,e.jsx)(n.span,{className:\"token operator\",children:\":\"}),\" \",(0,e.jsx)(n.span,{className:\"token function\",children:\"\\u4F5C\\u7528\\u57DF\\u94FE\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),\"\\u4E0E\\u95ED\\u5305\\u76F8\\u5173\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),`\n`]})]})}),(0,e.jsx)(n.p,{children:\"\\u6267\\u884C\\u4E0A\\u4E0B\\u6587\\u7684\\u7279\\u70B9\"}),(0,e.jsxs)(n.ol,{children:[(0,e.jsx)(n.li,{children:\"\\u5355\\u7EBF\\u7A0B\\uFF1A\\u4E00\\u6B21\\u53EA\\u80FD\\u5904\\u7406\\u4E00\\u4EF6\\u4E8B\\uFF0C\\u5176\\u4ED6\\u4EE3\\u7801\\u6392\\u961F\\u7B49\\u5F85\\u3002\"}),(0,e.jsx)(n.li,{children:\"\\u540C\\u6B65\\u6267\\u884C\\uFF1A\\u4EE3\\u7801\\u6309\\u987A\\u5E8F\\u6267\\u884C\\u3002\"}),(0,e.jsx)(n.li,{children:\"\\u4E00\\u4E2A\\u5168\\u5C40\\u4E0A\\u4E0B\\u6587\\uFF1A\\u59CB\\u7EC8\\u5B58\\u5728\\u3002\"}),(0,e.jsx)(n.li,{children:\"\\u65E0\\u9650\\u5236\\u7684\\u51FD\\u6570\\u4E0A\\u4E0B\\u6587\\uFF1A\\u6BCF\\u6B21\\u51FD\\u6570\\u8C03\\u7528\\u90FD\\u4F1A\\u521B\\u5EFA\\u65B0\\u7684\\u4E0A\\u4E0B\\u6587\\u3002\"}),(0,e.jsx)(n.li,{children:\"\\u6BCF\\u6B21\\u51FD\\u6570\\u8C03\\u7528\\u90FD\\u4F1A\\u521B\\u5EFA\\u65B0\\u7684\\u4E0A\\u4E0B\\u6587\\uFF08\\u5305\\u62EC\\u9012\\u5F52\\u8C03\\u7528\\uFF09\\u3002\"})]}),(0,e.jsx)(n.p,{children:\"\\u6267\\u884C\\u4E0A\\u4E0B\\u6587\\u7684\\u521B\\u5EFA\\u6B65\\u9AA4\"}),(0,e.jsx)(n.p,{children:\"\\u521B\\u5EFA\\u9636\\u6BB5\"}),(0,e.jsxs)(n.ol,{children:[(0,e.jsx)(n.li,{children:\"\\u521D\\u59CB\\u5316\\u4F5C\\u7528\\u57DF\\u94FE \\u521B\\u5EFA\\u5F53\\u524D\\u4E0A\\u4E0B\\u6587\\u7684\\u4F5C\\u7528\\u57DF\\u94FE\\uFF0C\\u94FE\\u63A5\\u5230\\u7236\\u7EA7\\u4F5C\\u7528\\u57DF\\u3002\"}),(0,e.jsx)(n.li,{children:\"\\u521B\\u5EFA\\u53D8\\u91CF\\u5BF9\\u8C61 (VO) \\u2022 \\u521D\\u59CB\\u5316 arguments \\u5BF9\\u8C61\\uFF08\\u5982\\u679C\\u662F\\u51FD\\u6570\\u4E0A\\u4E0B\\u6587\\uFF09\\u3002 \\u2022 \\u626B\\u63CF\\u51FD\\u6570\\u58F0\\u660E\\uFF0C\\u5E76\\u5C06\\u5176\\u63D0\\u5347\\u3002 \\u2022 \\u626B\\u63CF\\u53D8\\u91CF\\u58F0\\u660E\\uFF0C\\u5C06\\u53D8\\u91CF\\u540D\\u6DFB\\u52A0\\u5230 VO\\uFF0C\\u503C\\u8BBE\\u4E3A undefined\\u3002\"}),(0,e.jsx)(n.li,{children:\"\\u6C42 this \\u6839\\u636E\\u8C03\\u7528\\u65B9\\u5F0F\\u786E\\u5B9A this \\u7684\\u6307\\u5411\\u3002\"})]}),(0,e.jsx)(n.p,{children:\"\\u6267\\u884C\\u9636\\u6BB5\"}),(0,e.jsxs)(n.ol,{children:[(0,e.jsx)(n.li,{children:\"\\u521D\\u59CB\\u5316\\u53D8\\u91CF\\u548C\\u51FD\\u6570\\u7684\\u5F15\\u7528 \\u5C06\\u53D8\\u91CF\\u8D4B\\u503C\\uFF0C\\u6267\\u884C\\u51FD\\u6570\\u4EE3\\u7801\\u3002\"}),(0,e.jsx)(n.li,{children:\"\\u6267\\u884C\\u4EE3\\u7801 \\u4FEE\\u6539\\u53D8\\u91CF\\u5BF9\\u8C61\\u7684\\u503C\\uFF0C\\u5B8C\\u6210\\u4EE3\\u7801\\u903B\\u8F91\\u3002\"})]}),(0,e.jsx)(n.p,{children:\"this \\u7684\\u6307\\u5411\"}),(0,e.jsx)(n.p,{children:\"\\u5224\\u65AD this \\u7684\\u6307\\u5411\"}),(0,e.jsx)(n.ol,{children:(0,e.jsx)(n.li,{children:\"\\u6307\\u5411\\u8C03\\u7528\\u5BF9\\u8C61\"})}),(0,e.jsx)(n.pre,{className:\"language-javascript\",children:(0,e.jsxs)(n.code,{className:\"language-javascript code-highlight\",children:[(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token keyword\",children:\"function\"}),\" \",(0,e.jsx)(n.span,{className:\"token function\",children:\"foo\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token class-name console\",children:\"console\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,e.jsx)(n.span,{className:\"token function property-access method\",children:\"log\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token keyword\",children:\"this\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,e.jsx)(n.span,{className:\"token property-access\",children:\"a\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token keyword\",children:\"var\"}),\" obj \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"=\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token literal-property property\",children:\"a\"}),(0,e.jsx)(n.span,{className:\"token operator\",children:\":\"}),\" \",(0,e.jsx)(n.span,{className:\"token number\",children:\"2\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token literal-property property\",children:\"foo\"}),(0,e.jsx)(n.span,{className:\"token operator\",children:\":\"}),` foo\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"obj\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,e.jsx)(n.span,{className:\"token function property-access method\",children:\"foo\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\";\"}),\" \",(0,e.jsx)(n.span,{className:\"token comment\",children:\"// \\u8F93\\u51FA 2\"}),`\n`]}),(0,e.jsx)(n.span,{className:\"code-line\",children:`\n`})]})}),(0,e.jsx)(n.ol,{start:\"2\",children:(0,e.jsx)(n.li,{children:\"\\u6307\\u5411\\u5168\\u5C40\\u5BF9\\u8C61\"})}),(0,e.jsx)(n.pre,{className:\"language-javascript\",children:(0,e.jsxs)(n.code,{className:\"language-javascript code-highlight\",children:[(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"\t\",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"function\"}),\" \",(0,e.jsx)(n.span,{className:\"token function\",children:\"foo\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"        \",(0,e.jsx)(n.span,{className:\"token class-name console\",children:\"console\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,e.jsx)(n.span,{className:\"token function property-access method\",children:\"log\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token keyword\",children:\"this\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,e.jsx)(n.span,{className:\"token property-access\",children:\"a\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"var\"}),\" a \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"=\"}),\" \",(0,e.jsx)(n.span,{className:\"token number\",children:\"2\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token function\",children:\"foo\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\";\"}),\" \",(0,e.jsx)(n.span,{className:\"token comment\",children:\"// \\u8F93\\u51FA 2\"}),`\n`]})]})}),(0,e.jsx)(n.ol,{start:\"3\",children:(0,e.jsx)(n.li,{children:\"\\u4F7F\\u7528 new \\u6784\\u9020\\u65F6\"})}),(0,e.jsx)(n.pre,{className:\"language-javascript\",children:(0,e.jsxs)(n.code,{className:\"language-javascript code-highlight\",children:[(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token keyword\",children:\"function\"}),\" \",(0,e.jsx)(n.span,{className:\"token constant\",children:\"A\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"this\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,e.jsx)(n.span,{className:\"token property-access\",children:\"a\"}),\" \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"=\"}),\" \",(0,e.jsx)(n.span,{className:\"token number\",children:\"3\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token keyword\",children:\"var\"}),\" obj \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"=\"}),\" \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"new\"}),\" \",(0,e.jsx)(n.span,{className:\"token class-name\",children:\"A\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token class-name console\",children:\"console\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,e.jsx)(n.span,{className:\"token function property-access method\",children:\"log\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),\"obj\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,e.jsx)(n.span,{className:\"token property-access\",children:\"a\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\";\"}),\" \",(0,e.jsx)(n.span,{className:\"token comment\",children:\"// \\u8F93\\u51FA 3\"}),`\n`]})]})}),(0,e.jsx)(n.ol,{start:\"4\",children:(0,e.jsx)(n.li,{children:\"call/apply/bind \\u6539\\u53D8 this \\u6307\\u5411\"})}),(0,e.jsx)(n.pre,{className:\"language-javascript\",children:(0,e.jsxs)(n.code,{className:\"language-javascript code-highlight\",children:[(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token keyword\",children:\"var\"}),\" obj \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"=\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),\" \",(0,e.jsx)(n.span,{className:\"token literal-property property\",children:\"a\"}),(0,e.jsx)(n.span,{className:\"token operator\",children:\":\"}),\" \",(0,e.jsx)(n.span,{className:\"token number\",children:\"2\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token keyword\",children:\"function\"}),\" \",(0,e.jsx)(n.span,{className:\"token function\",children:\"foo\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token class-name console\",children:\"console\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,e.jsx)(n.span,{className:\"token function property-access method\",children:\"log\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token keyword\",children:\"this\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,e.jsx)(n.span,{className:\"token property-access\",children:\"a\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"foo\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,e.jsx)(n.span,{className:\"token function property-access method\",children:\"call\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),\"obj\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\";\"}),\" \",(0,e.jsx)(n.span,{className:\"token comment\",children:\"// \\u8F93\\u51FA 2\"}),`\n`]})]})}),(0,e.jsx)(n.ol,{start:\"5\",children:(0,e.jsx)(n.li,{children:\"\\u7BAD\\u5934\\u51FD\\u6570 \\u7BAD\\u5934\\u51FD\\u6570\\u6CA1\\u6709\\u81EA\\u5DF1\\u7684 this\\uFF0C\\u5176 this \\u6307\\u5411\\u5B9A\\u4E49\\u65F6\\u6240\\u5728\\u4E0A\\u4E0B\\u6587\\u7684 this\\u3002\"})}),(0,e.jsx)(n.pre,{className:\"language-javascript\",children:(0,e.jsxs)(n.code,{className:\"language-javascript code-highlight\",children:[(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token keyword\",children:\"var\"}),\" obj \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"=\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token literal-property property\",children:\"a\"}),(0,e.jsx)(n.span,{className:\"token operator\",children:\":\"}),\" \",(0,e.jsx)(n.span,{className:\"token number\",children:\"2\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token function function-variable\",children:\"foo\"}),(0,e.jsx)(n.span,{className:\"token operator\",children:\":\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,e.jsx)(n.span,{className:\"token operator arrow\",children:\"=>\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"        \",(0,e.jsx)(n.span,{className:\"token class-name console\",children:\"console\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,e.jsx)(n.span,{className:\"token function property-access method\",children:\"log\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token keyword\",children:\"this\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,e.jsx)(n.span,{className:\"token property-access\",children:\"a\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"obj\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,e.jsx)(n.span,{className:\"token function property-access method\",children:\"foo\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\";\"}),\" \",(0,e.jsx)(n.span,{className:\"token comment\",children:\"// \\u8F93\\u51FA undefined\\uFF08\\u56E0\\u4E3A\\u7BAD\\u5934\\u51FD\\u6570\\u7684 this \\u6307\\u5411\\u5168\\u5C40\\uFF09\"}),`\n`]})]})}),(0,e.jsx)(n.p,{children:\"\\u4F5C\\u7528\\u57DF\\u4E0E\\u4F5C\\u7528\\u57DF\\u94FE\"}),(0,e.jsx)(n.p,{children:\"\\u4F5C\\u7528\\u57DF\"}),(0,e.jsx)(n.p,{children:\"\\u4F5C\\u7528\\u57DF\\u63A7\\u5236\\u53D8\\u91CF\\u548C\\u51FD\\u6570\\u7684\\u53EF\\u89C1\\u6027\\u4E0E\\u751F\\u547D\\u5468\\u671F\\uFF0C\\u5206\\u4E3A\\uFF1A\"}),(0,e.jsxs)(n.ol,{children:[(0,e.jsx)(n.li,{children:\"\\u5168\\u5C40\\u4F5C\\u7528\\u57DF\\uFF1A\\u5728\\u4EE3\\u7801\\u4EFB\\u4F55\\u5730\\u65B9\\u90FD\\u80FD\\u8BBF\\u95EE\\u3002 \\u2022 \\u6700\\u5916\\u5C42\\u5B9A\\u4E49\\u7684\\u53D8\\u91CF\\u3002 \\u2022 \\u5168\\u5C40\\u5BF9\\u8C61\\u7684\\u5C5E\\u6027\\u3002 \\u2022 \\u9690\\u5F0F\\u5B9A\\u4E49\\u7684\\u53D8\\u91CF\\uFF08\\u672A\\u901A\\u8FC7 var \\u58F0\\u660E\\u76F4\\u63A5\\u8D4B\\u503C\\u7684\\u53D8\\u91CF\\uFF09\\u3002\"}),(0,e.jsx)(n.li,{children:\"\\u5C40\\u90E8\\u4F5C\\u7528\\u57DF\\uFF1A\\u51FD\\u6570\\u5185\\u5B9A\\u4E49\\u7684\\u53D8\\u91CF\\uFF0C\\u4EC5\\u5728\\u51FD\\u6570\\u5185\\u53EF\\u89C1\\u3002\"})]}),(0,e.jsx)(n.p,{children:\"\\u4F5C\\u7528\\u57DF\\u94FE\"}),(0,e.jsx)(n.p,{children:\"\\u4F5C\\u7528\\u57DF\\u94FE\\u662F\\u7528\\u4E8E\\u67E5\\u627E\\u6807\\u8BC6\\u7B26\\u7684\\u94FE\\u5F0F\\u7ED3\\u6784\\uFF0C\\u51FD\\u6570\\u5B9A\\u4E49\\u65F6\\u4F1A\\u5C06\\u7236\\u7EA7\\u4F5C\\u7528\\u57DF\\u7684\\u53D8\\u91CF\\u5BF9\\u8C61\\u4FDD\\u5B58\\u5230\\u5176\\u5185\\u90E8\\u5C5E\\u6027 [[scope]] \\u4E2D\\u3002\"}),(0,e.jsx)(n.p,{children:\"\\u4F8B\\u5B50\\uFF1A\\u9759\\u6001\\u4F5C\\u7528\\u57DF\"}),(0,e.jsx)(n.pre,{className:\"language-javascript\",children:(0,e.jsxs)(n.code,{className:\"language-javascript code-highlight\",children:[(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token keyword\",children:\"var\"}),\" s \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"=\"}),\" \",(0,e.jsx)(n.span,{className:\"token number\",children:\"3\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token keyword\",children:\"function\"}),\" \",(0,e.jsx)(n.span,{className:\"token function\",children:\"a\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token class-name console\",children:\"console\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,e.jsx)(n.span,{className:\"token function property-access method\",children:\"log\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),\"s\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token keyword\",children:\"function\"}),\" \",(0,e.jsx)(n.span,{className:\"token function\",children:\"b\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"var\"}),\" s \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"=\"}),\" \",(0,e.jsx)(n.span,{className:\"token number\",children:\"6\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token function\",children:\"a\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token function\",children:\"b\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\";\"}),\" \",(0,e.jsx)(n.span,{className:\"token comment\",children:\"// \\u8F93\\u51FA 3\\uFF08\\u9759\\u6001\\u4F5C\\u7528\\u57DF\\uFF1A\\u5728\\u5B9A\\u4E49\\u65F6\\u786E\\u5B9A\\u4F5C\\u7528\\u57DF\\uFF09\"}),`\n`]})]})}),(0,e.jsx)(n.p,{children:\"\\u95ED\\u5305\"}),(0,e.jsx)(n.p,{children:\"\\u4EC0\\u4E48\\u662F\\u95ED\\u5305\\uFF1F\"}),(0,e.jsx)(n.p,{children:\"\\u95ED\\u5305\\u662F\\u53EF\\u4EE5\\u8BBF\\u95EE\\u81EA\\u7531\\u53D8\\u91CF\\u7684\\u51FD\\u6570\\u3002\\u81EA\\u7531\\u53D8\\u91CF\\u662F\\u6307\\u672A\\u5728\\u51FD\\u6570\\u5185\\u90E8\\u58F0\\u660E\\u7684\\u53D8\\u91CF\\u3002\"}),(0,e.jsx)(n.p,{children:\"\\u95ED\\u5305\\u7684\\u4F8B\\u5B50\"}),(0,e.jsx)(n.pre,{className:\"language-javascript\",children:(0,e.jsxs)(n.code,{className:\"language-javascript code-highlight\",children:[(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token keyword\",children:\"function\"}),\" \",(0,e.jsx)(n.span,{className:\"token function\",children:\"a\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"var\"}),\" num \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"=\"}),\" \",(0,e.jsx)(n.span,{className:\"token number\",children:\"1\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"function\"}),\" \",(0,e.jsx)(n.span,{className:\"token function\",children:\"b\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"        \",(0,e.jsx)(n.span,{className:\"token class-name console\",children:\"console\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,e.jsx)(n.span,{className:\"token function property-access method\",children:\"log\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),\"num\",(0,e.jsx)(n.span,{className:\"token operator\",children:\"++\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token keyword control-flow\",children:\"return\"}),\" b\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token keyword\",children:\"var\"}),\" c1 \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"=\"}),\" \",(0,e.jsx)(n.span,{className:\"token function\",children:\"a\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token function\",children:\"c1\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\";\"}),\" \",(0,e.jsx)(n.span,{className:\"token comment\",children:\"// \\u8F93\\u51FA 1\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token function\",children:\"c1\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\";\"}),\" \",(0,e.jsx)(n.span,{className:\"token comment\",children:\"// \\u8F93\\u51FA 2\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token keyword\",children:\"var\"}),\" c2 \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"=\"}),\" \",(0,e.jsx)(n.span,{className:\"token function\",children:\"a\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token function\",children:\"c2\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\";\"}),\" \",(0,e.jsx)(n.span,{className:\"token comment\",children:\"// \\u8F93\\u51FA 1\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token function\",children:\"c2\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\";\"}),\" \",(0,e.jsx)(n.span,{className:\"token comment\",children:\"// \\u8F93\\u51FA 2\"}),`\n`]}),(0,e.jsx)(n.span,{className:\"code-line\",children:`\n`})]})}),(0,e.jsx)(n.p,{children:\"\\u95ED\\u5305\\u7684\\u8FC7\\u7A0B\"}),(0,e.jsxs)(n.ol,{children:[(0,e.jsx)(n.li,{children:\"\\u6267\\u884C\\u51FD\\u6570 a \\u65F6\\uFF0C\\u521B\\u5EFA\\u5176\\u53D8\\u91CF\\u5BF9\\u8C61\\uFF0C\\u5305\\u542B\\u53D8\\u91CF num \\u548C\\u51FD\\u6570 b\\u3002\"}),(0,e.jsx)(n.li,{children:\"\\u51FD\\u6570 b \\u5B9A\\u4E49\\u65F6\\uFF0C\\u4FDD\\u5B58 a \\u7684\\u53D8\\u91CF\\u5BF9\\u8C61\\u5230\\u5176 [[scope]] \\u4E2D\\u3002\"}),(0,e.jsx)(n.li,{children:\"\\u5F53 c1 \\u8C03\\u7528 b \\u65F6\\uFF0C\\u901A\\u8FC7\\u4F5C\\u7528\\u57DF\\u94FE\\u8BBF\\u95EE a \\u7684\\u53D8\\u91CF\\u5BF9\\u8C61\\u5E76\\u4FEE\\u6539 num \\u7684\\u503C\\u3002\"})]}),(0,e.jsx)(n.p,{children:\"\\u603B\\u7ED3\\uFF1A\\u6267\\u884C\\u4E0A\\u4E0B\\u6587\\u8FC7\\u7A0B\"}),(0,e.jsx)(n.p,{children:\"\\u4EE5\\u4EE3\\u7801\\u4E3A\\u4F8B\\uFF1A\"}),(0,e.jsx)(n.pre,{className:\"language-javascript\",children:(0,e.jsxs)(n.code,{className:\"language-javascript code-highlight\",children:[(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token keyword\",children:\"var\"}),\" scope \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"=\"}),\" \",(0,e.jsx)(n.span,{className:\"token string\",children:'\"global scope\"'}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token keyword\",children:\"function\"}),\" \",(0,e.jsx)(n.span,{className:\"token function\",children:\"checkscope\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token parameter\",children:\"a\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"var\"}),\" scope2 \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"=\"}),\" \",(0,e.jsx)(n.span,{className:\"token string\",children:'\"local scope\"'}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token function\",children:\"checkscope\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token number\",children:\"5\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\";\"}),`\n`]})]})}),(0,e.jsxs)(n.ol,{children:[(0,e.jsx)(n.li,{children:\"\\u521B\\u5EFA\\u5168\\u5C40\\u4E0A\\u4E0B\\u6587 \\u521B\\u5EFA\\u5168\\u5C40\\u53D8\\u91CF\\u5BF9\\u8C61 globalContext.VO\\u3002\"}),(0,e.jsx)(n.li,{children:\"\\u521B\\u5EFA checkscope \\u51FD\\u6570 \\u4FDD\\u5B58\\u5168\\u5C40\\u53D8\\u91CF\\u5BF9\\u8C61\\u5230 checkscope \\u7684 [[scope]] \\u5C5E\\u6027\\u3002\"}),(0,e.jsx)(n.li,{children:\"\\u8C03\\u7528 checkscope \\u51FD\\u6570 \\u2022 \\u521B\\u5EFA checkscope \\u7684\\u6267\\u884C\\u4E0A\\u4E0B\\u6587\\u3002 \\u2022 \\u590D\\u5236 [[scope]] \\u521B\\u5EFA\\u4F5C\\u7528\\u57DF\\u94FE\\u3002 \\u2022 \\u521B\\u5EFA\\u6D3B\\u52A8\\u5BF9\\u8C61 AO\\uFF0C\\u5305\\u542B\\u53C2\\u6570\\u3001\\u53D8\\u91CF\\u548C\\u51FD\\u6570\\u58F0\\u660E\\u3002 \\u2022 \\u6C42 this \\u6307\\u5411\\u5168\\u5C40\\u5BF9\\u8C61\\u3002\"}),(0,e.jsx)(n.li,{children:\"\\u6267\\u884C\\u51FD\\u6570\\u4EE3\\u7801 \\u2022 \\u66F4\\u65B0\\u6D3B\\u52A8\\u5BF9\\u8C61 AO \\u7684\\u503C\\u3002 \\u2022 \\u6267\\u884C\\u5B8C\\u6BD5\\u540E\\uFF0C\\u4ECE\\u6267\\u884C\\u4E0A\\u4E0B\\u6587\\u6808\\u4E2D\\u5F39\\u51FA\\u3002\"})]})]})}function d(a={}){let{wrapper:n}=a.components||{};return n?(0,e.jsx)(n,{...a,children:(0,e.jsx)(p,{...a})}):p(a)}return y(b);})();\n;return Component;"
  },
  "_id": "blog/this--closure.mdx",
  "_raw": {
    "sourceFilePath": "blog/this--closure.mdx",
    "sourceFileName": "this--closure.mdx",
    "sourceFileDir": "blog",
    "contentType": "mdx",
    "flattenedPath": "blog/this--closure"
  },
  "type": "Blog",
  "readingTime": {
    "text": "7 min read",
    "minutes": 6.165,
    "time": 369900,
    "words": 1233
  },
  "slug": "this--closure",
  "path": "blog/this--closure",
  "filePath": "blog/this--closure.mdx",
  "toc": [
    {
      "value": "执行上下文的过程",
      "url": "#执行上下文的过程",
      "depth": 1
    },
    {
      "value": "全局上下文的创建",
      "url": "#全局上下文的创建",
      "depth": 2
    },
    {
      "value": "执行上下文",
      "url": "#执行上下文",
      "depth": 1
    },
    {
      "value": "什么是执行上下文？",
      "url": "#什么是执行上下文",
      "depth": 2
    }
  ],
  "structuredData": {
    "@context": "https://schema.org",
    "@type": "BlogPosting",
    "headline": "一次搞定闭包和this",
    "datePublished": "2018-03-19T00:00:00.000Z",
    "dateModified": "2018-03-19T00:00:00.000Z",
    "image": "/static/images/twitter-card.png",
    "url": "https://hpoenixf.com//blog/this--closure"
  }
}